{% extends "common/base.html" %}

<title>
{% block head_title %}{{ title }}{% endblock %}
</title>

<body>
{% block body_content %}
<div class="container">
	<div class="row flex-nowrap justify-content-left align-items-center">
		<div class="col-12 pt-2 ml-2 text-left">
			<h1>{{ title }}</h1>
		</div>
	</div>

	<br />
	<br />

	<div class="row">
		<!-- blog posts -->
		<div class="col-md-8">
            {% if book_sharelist %}
            {% for bookshare in book_sharelist %}
            <div class="card mb-4 box-shadow">
            	<div class="card-body align-items-start">
                    <div class="row">
            		    <a class="col-md-12" href="{% url 'sharelist:share_detail' share_id=bookshare.id %}">
            		    	<h3 class="card-title" style="word-wrap:break-word;"><strong>{{ bookshare.share_title }}</strong></h3>
            		    </a>
                    </div>
            		<div class="row">
            			<div class="col-sm-auto d-inline-block mb-2 text-primary">By 
            				<a href="{% url 'sharelist:share_index_own' user_id=bookshare.share_user.id %}"><strong>{{ bookshare.share_user }}</strong></a>
            			</div>
            			<div class="col-sm-auto text-muted">Last modified: {{ bookshare.share_update_date_time | date:"Y-M-d H:i:s" }}</div>
                    </div>
                    <div class="row">
            		    <div class="col-md-12 card-text my-auto">
            		    	<p>{{ post.get_blog_content_html | truncatechars_html:500 }}</p>
            		    </div>
                    </div>

                    {% if bookshare.share_books %}
                    <div class="row">
                        {% for booklog in bookshare.share_books.all|slice:":5" %}
                        <div class="col-lg-2 col-md-4 col-sm-6">
                            <a class="row justify-content-center" href="{% url 'shelf:booklog_detail' booklog_id=booklog.id %}">
                                <div class="card box-shadow text-center center-block" style="height:100px; width:80px;">
                                    {% if booklog.booklog_book.book_cover %}
                                    <img class="card-img img-fluid img-thumbnail" 
                                        data-src="holder.js/150x200?theme=thumb" alt="Book cover" 
                                        style="object-fit:cover; display:block; max-width:80px; height:100px; margin:auto; padding:auto;"
                                        src="{{ booklog.booklog_book.book_cover.url }}" data-holder-rendered="true"> {% else %}
                                    <div class="card-body">
                                        <h4 class="card-title text-primary">{{ booklog.booklog_book.book_title }}</h4>
                                        <h5 class="card-subtitle text-muted">{{ booklog.booklog_book.sub_title }}</h5>
                                        <p class="card-text">{{ booklog.get_booklog_intro_html|truncatechars_html:80 }}</p>
                                    </div>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
			<!-- pagination -->
			<div class="row justify-content-center">
				<div class="col-auto" aria-label="Page navigation">
				{% include 'common/paginator.html' with item_list=book_sharelist %}
				</div>
			</div>
			{% else %} 
			<!-- if no blogs -->
			<p class="text-center">No Share.</p>
			{% endif %}

			<br />
			<br />
		</div>

		<!-- widgets colume -->
		<div class="col-md-4">

			<div class="card">
				<h5 class="card-header">Search</h5>
				<div class="card-body">
					<form method="GET" action="">
					<div class="input-group">
						<input type="text" name="qs" class="form-control" placeholder="Search for..." aria-label="Recipient's username" aria-describedby="basic-addon2" value="{{ request.GET.qs }}">
						<div class="input-group-append">
							<button class="btn btn-default" type="submit"><i class="fa fa-search fa-lg" aria-hidden="true"></i></button>
						</div>
					</div>
					</form>
				</div>
			</div>

            {% if tag_list %}
			<div class="card">
				<h5 class="card-header">Catagory</h5>
				<div class="card-body">
					<form method="GET" action="">
					{% for tag in tag_list %}
						<input class="btn btn-success btn-round btn-sm my-1" name="qs" type="submit" value="{{ tag }}" />
					{% endfor %}
					</form>
				</div>
            </div>
            {% endif %}

		</div>

	</div>
</div>
{% endblock %}

</body>