{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load ratings %}

<head>
	<title>
	{% block head_title %}{{ book.book_title }}{% endblock %}
	{% block head_extension %}{{ comment_form.media }}{% endblock %}
	</title>
</head>

<body>
{% block body_content %}
<div class="container">
	{% include 'book/book_profile.html' with book=book user_rate=False add_to_shelf=True booklog=booklog view_booklog=True %}

	<div class="row my-5">
		<div class="col-md-12">
			<p class="lead"><strong>Book Introduction</strong></p>
			<hr />
		</div>
		<div class="col-md-12">
			<p>{{ book.get_book_intro_html }}</p>
		</div>
	</div>
	<br />
	<br />
	
	{% if request.user.is_authenticated and request.user.is_admin %}
	<div class="row justify-content-end">
		<div class="col-auto col-offset-2">
			<a href="{% url 'book:book_update' book_id=book.id %}" class="btn btn-default">Edit</a>
		</div>
		<div class="col-auto col-offset-2">
			<a href="{% url 'book:book_delete' book_id=book.id %}" class="btn btn-danger">Delete</a>
		</div>
	</div>
	{% endif %}
	
	<hr />
	<div class="row my-5">
		<div class="col-md-12">
			<div class="row justify-content-between align-items-end">
				<div class="col-auto">
					<p class="lead"><strong>Comments</strong></p>
				</div>
			</div>
		</div>
		<div class="col-md-12">
			{% include "comments/comments.html" with comment_list=book_comments %}
		</div>
	</div>
	<br />
	<br />
	<!-- <wb:comments url="{{ request.build_absolute_uri }}" width="auto" skin="silver" ></wb:comments> -->
</div>
{% endblock %}
</body>